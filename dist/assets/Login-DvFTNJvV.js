import{u as e,j as s}from"./index-BfeymZvK.js";import{r,u as t,N as a,L as i}from"./router-BAol8ij6.js";import{g as o,s as n,p as l,a as c,$ as d,b as m,u,o as f,c as h}from"./forms-UZf8--vE.js";import{S as g,M as x,a as p,E as v,b as y,n as b}from"./ui-COv8QD3e.js";import"./vendor-DOHx2j1n.js";const j=(e,s,r)=>{if(e&&"reportValidity"in e){const t=o(r,s);e.setCustomValidity(t&&t.message||""),e.reportValidity()}},w=(e,s)=>{for(const r in s.fields){const t=s.fields[r];t&&t.ref&&"reportValidity"in t.ref?j(t.ref,r,e):t&&t.refs&&t.refs.forEach(s=>j(s,r,e))}},N=(e,s)=>{s.shouldUseNativeValidation&&w(e,s);const r={};for(const t in e){const a=o(s.fields,t),i=Object.assign(e[t]||{},{ref:a&&a.ref});if(E(s.names||Object.keys(e),t)){const e=Object.assign({},o(r,t));n(e,"root",i),n(r,t,e)}else n(r,t,i)}return r},E=(e,s)=>{const r=C(s);return e.some(e=>C(e).match(`^${r}\\.\\d+`))};function C(e){return e.replace(/\]|\[/g,"")}function P(e,s){try{var r=e()}catch(t){return s(t)}return r&&r.then?r.then(void 0,s):r}function k(e,s){for(var r={};e.length;){var t=e[0],a=t.code,i=t.message,o=t.path.join(".");if(!r[o])if("unionErrors"in t){var n=t.unionErrors[0].errors[0];r[o]={message:n.message,type:n.code}}else r[o]={message:i,type:a};if("unionErrors"in t&&t.unionErrors.forEach(function(s){return s.errors.forEach(function(s){return e.push(s)})}),s){var l=r[o].types,c=l&&l[t.code];r[o]=m(o,s,r,a,c?[].concat(c,t.message):t.message)}e.shift()}return r}function S(e,s){for(var r={};e.length;){var t=e[0],a=t.code,i=t.message,o=t.path.join(".");if(!r[o])if("invalid_union"===t.code&&t.errors.length>0){var n=t.errors[0][0];r[o]={message:n.message,type:n.code}}else r[o]={message:i,type:a};if("invalid_union"===t.code&&t.errors.forEach(function(s){return s.forEach(function(s){return e.push(s)})}),s){var l=r[o].types,c=l&&l[t.code];r[o]=m(o,s,r,a,c?[].concat(c,t.message):t.message)}e.shift()}return r}function V(e,s,r){if(void 0===r&&(r={}),"_def"in(t=e)&&"object"==typeof t._def&&"typeName"in t._def)return function(a,i,o){try{return Promise.resolve(P(function(){return Promise.resolve(e["sync"===r.mode?"parse":"parseAsync"](a,s)).then(function(e){return o.shouldUseNativeValidation&&w({},o),{errors:{},values:r.raw?Object.assign({},a):e}})},function(e){if(s=e,Array.isArray(null==s?void 0:s.issues))return{values:{},errors:N(k(e.errors,!o.shouldUseNativeValidation&&"all"===o.criteriaMode),o)};var s;throw e}))}catch(t){return Promise.reject(t)}};var t;if(function(e){return"_zod"in e&&"object"==typeof e._zod}(e))return function(a,i,o){try{return Promise.resolve(P(function(){return Promise.resolve(("sync"===r.mode?l:c)(e,a,s)).then(function(e){return o.shouldUseNativeValidation&&w({},o),{errors:{},values:r.raw?Object.assign({},a):e}})},function(e){if(e instanceof d)return{values:{},errors:N(S(e.issues,!o.shouldUseNativeValidation&&"all"===o.criteriaMode),o)};throw e}))}catch(t){return Promise.reject(t)}};throw new Error("Invalid input: not a Zod schema")}const A=f({email:h().email("Please enter a valid email address"),password:h().min(6,"Password must be at least 6 characters")}),_=()=>{const[o,n]=r.useState(!1),{login:l,isAuthenticated:c,isLoading:d}=e(),m=t(),{register:f,handleSubmit:h,formState:{errors:j,isSubmitting:w}}=u({resolver:V(A)}),N=m.state?.from?.pathname||"/dashboard";if(c)return s.jsx(a,{to:N,replace:!0});return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-blue-50 flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 opacity-5",children:s.jsx("div",{className:"absolute inset-0",style:{backgroundImage:"url(\"data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23059669' fill-opacity='0.1'%3E%3Ccircle cx='30' cy='30' r='2'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E\")"}})}),s.jsxs("div",{className:"relative w-full max-w-md",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsxs("div",{className:"flex items-center justify-center mb-4",children:[s.jsx(g,{className:"h-12 w-12 text-green-600 mr-3"}),s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Krishisathi"})]}),s.jsx("h2",{className:"text-xl text-gray-600 mb-2",children:"Agri Officer Portal"}),s.jsx("p",{className:"text-gray-500",children:"Sign in to access your dashboard"})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[s.jsxs("form",{onSubmit:h(async e=>{try{await l(e),b.success("Login successful!")}catch(s){b.error(s instanceof Error?s.message:"Login failed")}}),className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(x,{className:"h-5 w-5 text-gray-400"})}),s.jsx("input",{id:"email",type:"email",autoComplete:"email",className:"block w-full pl-10 pr-3 py-3 border rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-green-500 focus:border-green-500 "+(j.email?"border-red-300":"border-gray-300"),placeholder:"officer@krishisathi.com",...f("email")})]}),j.email&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:j.email.message})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(p,{className:"h-5 w-5 text-gray-400"})}),s.jsx("input",{id:"password",type:o?"text":"password",autoComplete:"current-password",className:"block w-full pl-10 pr-10 py-3 border rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-green-500 focus:border-green-500 "+(j.password?"border-red-300":"border-gray-300"),placeholder:"Enter your password",...f("password")}),s.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>n(!o),children:o?s.jsx(v,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"}):s.jsx(y,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]}),j.password&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:j.password.message})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx(i,{to:"/forgot-password",className:"text-sm text-green-600 hover:text-green-500",children:"Forgot your password?"})}),s.jsx("button",{type:"submit",disabled:w||d,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed",children:w||d?s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Signing in..."]}):"Sign In"})]}),s.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-md",children:[s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Demo Credentials:"}),s.jsxs("p",{className:"text-xs text-gray-500",children:["Email: officer@krishisathi.com",s.jsx("br",{}),"Password: password123"]})]})]}),s.jsx("div",{className:"text-center mt-8",children:s.jsx("p",{className:"text-sm text-gray-500",children:"Â© 2024 Krishisathi. All rights reserved."})})]})]})};export{_ as default};
//# sourceMappingURL=Login-DvFTNJvV.js.map
